<div class="sent-at" *ngIf="displaySentAt" style="width: 100%; text-align: center">{{ message.sentAt | myDate }}</div>

<div class="message-wrapper" [ngClass]="message.senderId ===  getCurrentUser().username ? 'sender' : '' "
     [class.first]="position === 'f'"
     [class.last]="position === 'l'"
     [class.firstLast]="position === 'fl'">
  <div class="message-container">
    <div *ngIf="message.senderId !==  getCurrentUser().username" class="message-image-container">
      <img *ngIf="(position === 'l' || position ==='fl')"
           class="user-img" src="{{getAvatarUrl() }}"
           alt="">
    </div>
    <p *ngIf="message.contentType == 'TEXT'"
       [class.first]="position === 'f'"
       [class.last]="position === 'l'"
       [class.firstLast]="position === 'fl'"
       class="message-content">
      {{ message.content }}</p>
    <div class="message-img"
         [class.first]="position === 'f'"
         [class.last]="position === 'l'"
         *ngIf="message.contentType == 'IMG'">
      <img *ngFor="let imgSrc of imgToDisplay" [src]="imgSrc" alt="">
    </div>
    <div class="options-container">
      <div #toggleOptionMenu (click)="toggleMenu()" class="option" [hidden]="!isOptionMenu">
        <span >
          <fa-icon [icon]="faEllipsisVertical"></fa-icon>
        </span>
      </div>
      <ul #optionMenu [hidden]="!isOptionMenu" class="option-menu">
        <li (click)="deleteMessage(message)">Xóa tin nhắn</li>
        <li>Sao chép</li>
      </ul>

    </div>
  </div>
</div>
